정확한 답이 필요하다면 float과 double은 피하라
## 이진 부동소수점 문제
- Java의 `float`과 `double`은 과학/공학 계산용으로 설계되어, 넓은 범위의 수를 빠른 시간내 정밀 수준의 **`'근사치'`** 로 계산
	- 즉, **`'정확한'`** 결과가 필요하다면, 사용해서는 안 됨
	- 10의 음의 거듭제곱 수(0.1($10^{-1}$), 0.01($10^{-2}$)...)를 표현할 수 없기 때문
### 이진 부동소수점(binary floating point)
- 참고
	- [Floating Point Math](https://0.30000000000000004.com/)
- 진법과, 그에 따른 `분수 표현`에 있어 문제가 있음
	- 우리가 보통 사용하는 `10진법`의 경우, `10`의 `소인수`를 사용하는 분수만 표현할 수 있음
		- ex) 1/2, 1/4, 1/5, 1/8, 1/10, ...
	- 반면, 1/3, 1/6, 1/7 과 같은 수는 분모가 `3` 또는 `7`과 같은 `소수`를 사용하기 때문에, `순환소수`임
		- ex) 1/3을 `10진법`으로 나타내려면 `0.333....` 임
	- 이처럼, 컴퓨터가 사용하는 `2진법(binary)`에서는 `2`가 `유일한 소인수`이기 때문에, 분모가 2인 분수만 소인수로 깔끔하게 표현할 수 있음
		- ex) 1/2, 1/4, 1/8, ...
	- 반면, `10진법`에서 표현할 수 있던 `1/5`, `1/10`은 2진수에서는 `순환소수`로 표현됨
		- 따라서 `0.1(1/10)`, `0.2(1/5)`와 같은 수는 `10진수`에서는 깔끔한 소수이지만, `2진수` 체계에서는 `순환소수`임
	- 만약 `순환소수`에 대해 연산을 수행할 경우, 이를 `2진수`에서 사람이 읽을 수 있는 `10진수로 변환하는 과정`에서 남은 `나머지 값`들이 계속 `전달`되게 됨
		- 이 때문에 `0.1 + 0.2 != 0.3`과 같은 문제가 발생하는 것
### Java의 부동소수점
- Java에서도 부동소수점을 사용하기 때문에 `소수점이 존재하는 수`에 대한 연산이 `정확하지 않을 수` 있음
	- ex) `1.03 - 0.42`을 출력하면, `0.6100000000000001` 을 출력함
#### 반올림을 한다면?
```java
public static void main(String[] args) {
	double funds = 1.00;
	int itemsBought = 0;
	for (double price = 0.10; funds >= price; price += 0.10) {
		funds -= price;
		itemsBought++;
	} 
	System.out.println(itemsBought + "items bought.");
	System.out.println("Change: $" + funds);
}
```
- 결괏값 출력 전 반올림을 하면 될 것 같다고 생각할 수 있으나, 그렇지 않은 경우도 존재
- 예를 들어, 1달러를 갖고 0.1, 0.2, 0.3, ..., 1달러짜리 사탕을 차례대로 살 수 있을때까지 사는 코드를 구동해보면 사탕 3개를 구입한 뒤 0.3999999999999 달러가 남음
## 대안
- 금융 계산과 같이 정확도가 중요할 경우, `BigDecimal`, `int`, `long`을 사용해야 함
- 위 사탕 구매 코드에서 `double`을 `BigDecimal`로만 바꿔주면 정확히 동작
- 다만, `BigDecimal`은 사용하기 불편하고, 느리다는 단점이 존재
- 이외에도, `int`와 `long`을 대안으로 쓸 수 있지만 표현 가능한 `값의 범위가 제한`되고, `소수점을 직접 관리`해주어야 함
	- 예를들어 소수점 값을 1의 자리까지 시프트해 올리는(0.25 -> 25) 등의 작업이 필요
# 핵심 정리
- `정확한 답`이 필요할 땐 `float` 또는 `double`의 사용을 피할 것
- 불편함과 성능 저하를 감수할 수 있다면 `BigDecimal`을 사용할 것
	- 8가지 반올림 모드를 제공해 반올림을 완벽히 제어 가능함
- 소수점을 직접 관리할 수 있고, 숫자가 너무 크지 않다면 `int` 및 `long`을 사용하는 것도 대안이 됨
	- 다만, 18자리 이상(`long` 범위)을 넘어가면 `BigDecimal`을 사용해야 함